---
title: "p8015_hw2_ax2173"
output: github_document
---

```{r setup}
library(tidyverse)
library(readxl)
library(haven)
```

## Problem 1

```{r}
subway_df = 
  read.csv("./Data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names()
```

## Problem 2

```{r read and clean the Mr. Trash Wheel sheet for P2}
mr_trash_df = read_excel("./Data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx", skip = 1) %>% 
  janitor::clean_names() %>% 
  select(dumpster:homes_powered) %>% 
  drop_na() %>% 
  mutate(sports_balls = as.integer(round(sports_balls, 0)),
         dumpster = as.double(dumpster),
         name = 'mr_trash_wheel')
```

```{r read and clean the Professor Trash Wheel for P2}
pro_trash_df = read_excel("./Data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx", sheet = "Professor Trash Wheel", skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na() %>% 
  mutate(sports_balls = as.integer(round(sports_balls, 0)),
         name = "professor_trash_wheel")
```

```{r combine these two dataset for P2}
trash_df = bind_rows(mr_trash_df, pro_trash_df)
```

* There are some descriptions regarding these data:
  * There are these varibales: `r colnames(trash_df)`
  * There are totally `r nrow(trash_df)` observations, and `r ncol(trash_df)` variables
  * The total weight of trash collected by Professor Trash Wheel is `r sum(pro_trash_df$weight_tons)` tons.
  * The total number of sport balls collected by Mr. Trash Wheel in 2020 is `r sum(mr_trash_df$sports_balls, mr_trash_df$year == 2020)` balls.

## Problem 3

```{r import data for P3}
pols_month_df = read_csv("./Data/fivethirtyeight_datasets/pols-month.csv")
unemployment_df = read_csv("./Data/fivethirtyeight_datasets/unemployment.csv")
snp_df = read_csv("./Data/fivethirtyeight_datasets/snp.csv")
```

```{r data clean for pols_month_df for P3}
pols_month_df = pols_month_df %>% 
  separate(mon, into = c('year','month','day'), sep = '-') %>% 
  mutate(month = recode(month, '01' = 'Jan', '02' = 'Feb', '03' = 'Mar', '04' = 'Apr', '05' = 'May', '06' = 'Jun', '07' = 'Jul', '08' = 'Aug', '09' = 'Sep', '10' = 'Oct', '11' = 'Nov', '12' = 'Dec'),
         president = prez_gop + gov_gop + sen_gop + rep_gop + prez_dem + gov_dem + sen_dem + rep_dem
         ) %>% 
  select(-prez_dem, -prez_gop, -day)
```

```{r data clean for snp_df for P3}
snp_df = snp_df %>% 
  separate(date, into = c('month','day','year'), sep = '/') %>% 
  mutate(month = recode(month, '1' = '01', '2' = '02', '3' = '03', '4' = '04', '5' = '05', '6' = '06', '7' = '07', '8' = '08', '9' = '09')) %>%
  arrange(year, month) %>% 
  mutate(month = recode(month, '01' = 'Jan', '02' = 'Feb', '03' = 'Mar', '04' = 'Apr', '05' = 'May', '06' = 'Jun', '07' = 'Jul', '08' = 'Aug', '09' = 'Sep', '10' = 'Oct', '11' = 'Nov', '12' = 'Dec')) %>%
  select(year, month, close)
```

```{r data clean for unemployment_df for P3}
unemployment_df = unemployment_df %>% 
  pivot_longer(
    Jan : Dec,
    names_to = 'month',
    values_to = 'unemployment'
  )
```


