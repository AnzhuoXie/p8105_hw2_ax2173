p8015_hw2_ax2173
================

``` r
library(tidyverse)
```

    ## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
    ## ✔ ggplot2 3.3.6      ✔ purrr   0.3.4 
    ## ✔ tibble  3.1.8      ✔ dplyr   1.0.10
    ## ✔ tidyr   1.2.1      ✔ stringr 1.4.1 
    ## ✔ readr   2.1.2      ✔ forcats 0.5.2 
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()

``` r
library(readxl)
library(haven)
```

## Problem 1

``` r
subway_df = 
  read.csv("./Data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names()
```

## Problem 2

``` r
mr_trash_df = read_excel("./Data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx", skip = 1) %>% 
  janitor::clean_names() %>% 
  select(dumpster:homes_powered) %>% 
  drop_na() %>% 
  mutate(sports_balls = as.integer(round(sports_balls, 0)),
         dumpster = as.double(dumpster),
         name = 'mr_trash_wheel')
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`
    ## • `` -> `...17`

``` r
pro_trash_df = read_excel("./Data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx", sheet = "Professor Trash Wheel", skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na() %>% 
  mutate(sports_balls = as.integer(round(sports_balls, 0)),
         name = "professor_trash_wheel")
```

``` r
trash_df = bind_rows(mr_trash_df, pro_trash_df)
```

-   There are some descriptions regarding these data:
    -   There are these varibales: dumpster, month, year, date,
        weight_tons, volume_cubic_yards, plastic_bottles, polystyrene,
        cigarette_butts, glass_bottles, grocery_bags, chip_bags,
        sports_balls, homes_powered, name
    -   There are totally 524 observations, and 15 variables
    -   The total weight of trash collected by Professor Trash Wheel is
        135.5 tons.
    -   The total number of sport balls collected by Mr. Trash Wheel in
        2020 is 5393 balls.

## Problem 3

``` r
pols_month_df = read_csv("./Data/fivethirtyeight_datasets/pols-month.csv")
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
unemployment_df = read_csv("./Data/fivethirtyeight_datasets/unemployment.csv")
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
snp_df = read_csv("./Data/fivethirtyeight_datasets/snp.csv")
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
pols_month_df = pols_month_df %>% 
  separate(mon, into = c('year','month','day'), sep = '-') %>% 
  mutate(month = recode(month, '01' = 'Jan', '02' = 'Feb', '03' = 'Mar', '04' = 'Apr', '05' = 'May', '06' = 'Jun', '07' = 'Jul', '08' = 'Aug', '09' = 'Sep', '10' = 'Oct', '11' = 'Nov', '12' = 'Dec'),
         president = prez_gop + gov_gop + sen_gop + rep_gop + prez_dem + gov_dem + sen_dem + rep_dem
         ) %>% 
  select(-prez_dem, -prez_gop, -day)
```

``` r
snp_df = snp_df %>% 
  separate(date, into = c('month','day','year'), sep = '/') %>% 
  mutate(month = recode(month, '1' = '01', '2' = '02', '3' = '03', '4' = '04', '5' = '05', '6' = '06', '7' = '07', '8' = '08', '9' = '09')) %>%
  arrange(year, month) %>% 
  mutate(month = recode(month, '01' = 'Jan', '02' = 'Feb', '03' = 'Mar', '04' = 'Apr', '05' = 'May', '06' = 'Jun', '07' = 'Jul', '08' = 'Aug', '09' = 'Sep', '10' = 'Oct', '11' = 'Nov', '12' = 'Dec')) %>%
  select(year, month, close)
```

``` r
unemployment_df = unemployment_df %>% 
  pivot_longer(
    Jan : Dec,
    names_to = 'month',
    values_to = 'unemployment'
  )
```
